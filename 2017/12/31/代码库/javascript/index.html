<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>javascript | Awoke</title>
    
    
        <meta name="keywords" content="代码库" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="javascript.">
<meta name="keywords" content="代码库">
<meta property="og:type" content="article">
<meta property="og:title" content="javascript">
<meta property="og:url" content="http://yoursite.com/2017/12/31/代码库/javascript/index.html">
<meta property="og:site_name" content="Awoke">
<meta property="og:description" content="javascript.">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-12-31T02:54:58.689Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="javascript">
<meta name="twitter:description" content="javascript.">
    

    
        <link rel="alternate" href="/atom.xml" title="Awoke" type="application/atom+xml" />
    

    
        <link rel="icon" href="/favicon.ico" />
    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">
    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="/libs/jquery/plugins/cookie/1.4.1/jquery.cookie.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Awoke</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/">首页</a>
                
                    <a class="main-nav-link" href="/archives">归档</a>
                
                    <a class="main-nav-link" href="/categories">分类</a>
                
                    <a class="main-nav-link" href="/tags">标签</a>
                
                    <a class="main-nav-link" href="/about">关于</a>
                
            </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/">首页</a></td>
                
                    <td><a class="main-nav-link" href="/archives">归档</a></td>
                
                    <td><a class="main-nav-link" href="/categories">分类</a></td>
                
                    <td><a class="main-nav-link" href="/tags">标签</a></td>
                
                    <td><a class="main-nav-link" href="/about">关于</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap" id='categories'>
        <h3 class="widget-title">
            <span>分类</span>
            &nbsp;
            <a id='allExpand' href="#">
                <i class="fa fa-angle-double-down fa-2x"></i>
            </a>
        </h3>
        
        
        
         <ul class="unstyled" id="tree" > 
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Git
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/2017/10/25/遇到的问题/Git出现 fatal Pathspec 'xxx' is in submodule/">Git出现 fatal:Pathspec 'xxx' is in submodule</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            Hexo
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/2017/10/25/hexo/">Hexo 常用命令</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            JavaScript 基础
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/2017/10/26/JavaScript 基础/JavaScript 小技巧/">JavaScript 小技巧</a></li>  <li class="file"><a href="/2017/10/28/JavaScript 基础/JavaScript 排序算法/">JavaScript 排序算法</a></li>  <li class="file"><a href="/2017/10/27/JavaScript 基础/JavaScript 数组去重/">JavaScript 数组去重</a></li>  <li class="file"><a href="/2017/10/25/JavaScript 基础/ES6/">ES6</a></li>  <li class="file"><a href="/2017/10/26/JavaScript 基础/JavaScript 简写技巧/">JavaScript 简写技巧</a></li>  <li class="file"><a href="/2017/10/27/JavaScript 基础/JavaScript 数组相关/">JavaScript 数组常用方法</a></li>  <li class="file"><a href="/2017/10/27/JavaScript 基础/正则表达式/">JavaScript 正则表达式</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            gitbook
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/2017/10/25/GitBook制作电子书详细教程（命令行版）/">GitBook制作电子书详细教程（命令行版）</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            node
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/2017/10/29/node/爬虫 - puppeteer 截屏/">爬虫（一） - puppeteer 截屏</a></li>  <li class="file"><a href="/2017/10/29/node/爬虫 - puppeteer 抓文件/">爬虫（二） - puppeteer 抓文件</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            书单
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/2017/10/25/书单/书单/">书单</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory open">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder-open"></i>
                            &nbsp;
                            代码库
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/2017/12/31/代码库/CSS-RESET/">CSS</a></li>  <li class="file"><a href="/2017/12/31/代码库/gulp/">gulp</a></li>  <li class="file"><a href="/2017/12/31/代码库/nodejs/">nodejs</a></li>  <li class="file"><a href="/2017/12/31/代码库/package.json/">package.json</a></li>  <li class="file active"><a href="/2017/12/31/代码库/javascript/">javascript</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            转载
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/2017/10/25/转载/互联网分层架构，为啥要前后端分离？/">互联网分层架构，为啥要前后端分离</a></li>  <li class="file"><a href="/2017/10/26/转载/一文看懂web服务器、应用服务器、web容器、反向代理服务器区别与联系/">web服务器、应用服务器、web容器、反向代理服务器区别联系</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            遇到的问题
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/2017/10/29/遇到的问题/async Unexpected token function/">async Unexpected token function</a></li>  </ul> 
                    </li> 
                    
                    <li class="directory">
                        <a href="#" data-role="directory">
                            <i class="fa fa-folder"></i>
                            &nbsp;
                            面试
                        </a>
                         <ul class="unstyled" id="tree" >  <li class="file"><a href="/2017/11/02/面试整理1101/面试整理/">JS 基础部分面试</a></li>  <li class="file"><a href="/2017/10/28/面试/前端面试-自己整理/">前端面试-自己整理</a></li>  <li class="file"><a href="/2017/10/28/面试/前端面试/">前端面试</a></li>  </ul> 
                    </li> 
                     <li class="file"><a href="/2017/10/30/面试/vue/"></a></li>  </ul> 
    </div>
    <script>
        $(document).ready(function() {
            var iconFolderOpenClass  = 'fa-folder-open';
            var iconFolderCloseClass = 'fa-folder';
            var iconAllExpandClass = 'fa-angle-double-down';
            var iconAllPackClass = 'fa-angle-double-up';
            // Handle directory-tree expansion:
            // 左键单独展开目录
            $(document).on('click', '#categories a[data-role="directory"]', function (event) {
                event.preventDefault();

                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var subtree = $(this).siblings('ul');
                icon.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if (expanded) {
                    if (typeof subtree != 'undefined') {
                        subtree.slideUp({ duration: 100 });
                    }
                    icon.addClass(iconFolderCloseClass);
                } else {
                    if (typeof subtree != 'undefined') {
                        subtree.slideDown({ duration: 100 });
                    }
                    icon.addClass(iconFolderOpenClass);
                }
            });
            // 右键展开下属所有目录
            $('#categories a[data-role="directory"]').bind("contextmenu", function(event){
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var listNode = $(this).siblings('ul');
                var subtrees = $.merge(listNode.find('li ul'), listNode);
                var icons = $.merge(listNode.find('.fa'), icon);
                icons.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if(expanded) {
                    subtrees.slideUp({ duration: 100 });
                    icons.addClass(iconFolderCloseClass);
                } else {
                    subtrees.slideDown({ duration: 100 });
                    icons.addClass(iconFolderOpenClass);
                }
            })
            // 展开关闭所有目录按钮
            $(document).on('click', '#allExpand', function (event) {
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconAllExpandClass);
                icon.removeClass(iconAllExpandClass).removeClass(iconAllPackClass);
                if(expanded) {
                    $('#sidebar .fa.fa-folder').removeClass('fa-folder').addClass('fa-folder-open')
                    $('#categories li ul').slideDown({ duration: 100 });
                    icon.addClass(iconAllPackClass);
                } else {
                    $('#sidebar .fa.fa-folder-open').removeClass('fa-folder-open').addClass('fa-folder')
                    $('#categories li ul').slideUp({ duration: 100 });
                    icon.addClass(iconAllExpandClass);
                }
            });  
        });
    </script>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
            <section id="main"><article id="post-代码库/javascript" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/代码库/">代码库</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/代码库/">代码库</a>
    </div>

                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/12/31/代码库/javascript/">
            <time datetime="2017-12-31T02:03:26.000Z" itemprop="datePublished">2017-12-31</time>
        </a>
    </div>


                        
                            <div class="article-meta-button">
                                <a href='https://github.com/zthxxx/Wiki-site/raw/writing/source/_posts/代码库/javascript.md'> Source </a>
                            </div>
                            <div class="article-meta-button">
                                <a href='https://github.com/zthxxx/Wiki-site/edit/writing/source/_posts/代码库/javascript.md'> Edit </a>
                            </div>
                            <div class="article-meta-button">
                                <a href='https://github.com/zthxxx/Wiki-site/commits/writing/source/_posts/代码库/javascript.md'> History </a>
                            </div>
                        
                    </div>
                
                
    
        <h1 class="article-title" itemprop="name">
            javascript
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
                <div id="toc" class="toc-article">
                <strong class="toc-title">文章目录</strong>
                    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#The-common-snippets-of-the-javascript-blush"><span class="toc-number">1.</span> <span class="toc-text">The common snippets of the javascript :blush:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#防反跳-debounce"><span class="toc-number">1.0.0.1.</span> <span class="toc-text">防反跳 / debounce</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#拉平数组-flatten"><span class="toc-number">1.0.0.2.</span> <span class="toc-text">拉平数组 / flatten</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取函数的返回值-value"><span class="toc-number">1.0.0.3.</span> <span class="toc-text">获取函数的返回值 / value</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#动态加载javascript"><span class="toc-number">1.0.0.4.</span> <span class="toc-text">动态加载javascript</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#移动端页面初始化"><span class="toc-number">1.0.0.5.</span> <span class="toc-text">移动端页面初始化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取随机数"><span class="toc-number">1.0.0.6.</span> <span class="toc-text">获取随机数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取元素的计算之后的样式"><span class="toc-number">1.0.0.7.</span> <span class="toc-text">获取元素的计算之后的样式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#判断对象的数据类型"><span class="toc-number">1.0.0.8.</span> <span class="toc-text">判断对象的数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对象复制"><span class="toc-number">1.0.0.9.</span> <span class="toc-text">对象复制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#判断网页是否在微信浏览器打开"><span class="toc-number">1.0.0.10.</span> <span class="toc-text">判断网页是否在微信浏览器打开</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#判断手机系统"><span class="toc-number">1.0.0.11.</span> <span class="toc-text">判断手机系统</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取查询字符串的值"><span class="toc-number">1.0.0.12.</span> <span class="toc-text">获取查询字符串的值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取元素在页面中的位置"><span class="toc-number">1.0.0.13.</span> <span class="toc-text">获取元素在页面中的位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js仿照md5"><span class="toc-number">1.0.0.14.</span> <span class="toc-text">js仿照md5</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取星期几"><span class="toc-number">1.0.0.15.</span> <span class="toc-text">获取星期几</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#requestAnimationFrame的兼容性处理"><span class="toc-number">1.0.0.16.</span> <span class="toc-text">requestAnimationFrame的兼容性处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#数组去重"><span class="toc-number">1.0.0.17.</span> <span class="toc-text">数组去重</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#操作className"><span class="toc-number">1.0.0.18.</span> <span class="toc-text">操作className</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#判断网页运行在电脑还是手机"><span class="toc-number">1.0.0.19.</span> <span class="toc-text">判断网页运行在电脑还是手机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#转意html"><span class="toc-number">1.0.0.20.</span> <span class="toc-text">转意html</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#操作cookie"><span class="toc-number">1.0.1.</span> <span class="toc-text">操作cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数节流"><span class="toc-number">1.0.2.</span> <span class="toc-text">函数节流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数去抖"><span class="toc-number">1.0.3.</span> <span class="toc-text">函数去抖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#求数组最大值"><span class="toc-number">1.0.4.</span> <span class="toc-text">求数组最大值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#求数组的最小值"><span class="toc-number">1.0.5.</span> <span class="toc-text">求数组的最小值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#chunk函数"><span class="toc-number">1.0.6.</span> <span class="toc-text">chunk函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#compact-去除数组中值为falsey的元素"><span class="toc-number">1.0.7.</span> <span class="toc-text">compact: 去除数组中值为falsey的元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#计算一个值在数组中出现的次数"><span class="toc-number">1.0.8.</span> <span class="toc-text">计算一个值在数组中出现的次数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#deepFlatten-拉平数组"><span class="toc-number">1.0.9.</span> <span class="toc-text">deepFlatten: 拉平数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#difference-返回数组的差值"><span class="toc-number">1.0.10.</span> <span class="toc-text">difference: 返回数组的差值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除数组中的元素，直到回调函数返回true"><span class="toc-number">1.0.11.</span> <span class="toc-text">删除数组中的元素，直到回调函数返回true</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回索引是某个值的倍数的元素"><span class="toc-number">1.0.12.</span> <span class="toc-text">返回索引是某个值的倍数的元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#过滤出数组中没有重复值的元素"><span class="toc-number">1.0.13.</span> <span class="toc-text">过滤出数组中没有重复值的元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#拉平数组"><span class="toc-number">1.0.14.</span> <span class="toc-text">拉平数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#拉平数组-深拉平"><span class="toc-number">1.0.15.</span> <span class="toc-text">拉平数组(深拉平)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对数组按照特定条件分组"><span class="toc-number">1.0.16.</span> <span class="toc-text">对数组按照特定条件分组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回数组的第一个元素"><span class="toc-number">1.0.17.</span> <span class="toc-text">返回数组的第一个元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回除数组最后一个元素之外的所有元素"><span class="toc-number">1.0.18.</span> <span class="toc-text">返回除数组最后一个元素之外的所有元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#初始化范围数组"><span class="toc-number">1.0.19.</span> <span class="toc-text">初始化范围数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#初始化并以特定的值填充数组"><span class="toc-number">1.0.20.</span> <span class="toc-text">初始化并以特定的值填充数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回数组交集"><span class="toc-number">1.0.21.</span> <span class="toc-text">返回数组交集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回数组的最后一个元素"><span class="toc-number">1.0.22.</span> <span class="toc-text">返回数组的最后一个元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将数组中的值映射到对象"><span class="toc-number">1.0.23.</span> <span class="toc-text">将数组中的值映射到对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回数组的第n个元素"><span class="toc-number">1.0.24.</span> <span class="toc-text">返回数组的第n个元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#从对象中选取给定键的键值对"><span class="toc-number">1.0.25.</span> <span class="toc-text">从对象中选取给定键的键值对</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#从数组中筛选指定的值"><span class="toc-number">1.0.26.</span> <span class="toc-text">从数组中筛选指定的值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#从数组中移除使给定函数返回false的元素"><span class="toc-number">1.0.27.</span> <span class="toc-text">从数组中移除使给定函数返回false的元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回数组中的随机的元素"><span class="toc-number">1.0.28.</span> <span class="toc-text">返回数组中的随机的元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#打乱数组的顺序"><span class="toc-number">1.0.29.</span> <span class="toc-text">打乱数组的顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回两个数组的交集"><span class="toc-number">1.0.30.</span> <span class="toc-text">返回两个数组的交集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回两个数组的差值"><span class="toc-number">1.0.31.</span> <span class="toc-text">返回两个数组的差值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回数组中第一个之外的元素"><span class="toc-number">1.0.32.</span> <span class="toc-text">返回数组中第一个之外的元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回数组的前n个元素"><span class="toc-number">1.0.33.</span> <span class="toc-text">返回数组的前n个元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回数组的并集"><span class="toc-number">1.0.34.</span> <span class="toc-text">返回数组的并集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#筛选数组剔除某些值的元素"><span class="toc-number">1.0.35.</span> <span class="toc-text">筛选数组剔除某些值的元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#zip函数"><span class="toc-number">1.0.36.</span> <span class="toc-text">zip函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#判断元素是否在可视区内"><span class="toc-number">1.0.37.</span> <span class="toc-text">判断元素是否在可视区内</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取当前页的滚动位置"><span class="toc-number">1.0.38.</span> <span class="toc-text">获取当前页的滚动位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取url的查询字符串"><span class="toc-number">1.0.39.</span> <span class="toc-text">获取url的查询字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#页面重定向"><span class="toc-number">1.0.40.</span> <span class="toc-text">页面重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#平滑的滚动到页面的顶部"><span class="toc-number">1.0.41.</span> <span class="toc-text">平滑的滚动到页面的顶部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回两个日期之间的差异-天"><span class="toc-number">1.0.42.</span> <span class="toc-text">返回两个日期之间的差异(天)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将JSON对象转换为日期"><span class="toc-number">1.0.43.</span> <span class="toc-text">将JSON对象转换为日期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#链式异步函数"><span class="toc-number">1.0.44.</span> <span class="toc-text">链式异步函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#compose函数-从右向左执行函数"><span class="toc-number">1.0.45.</span> <span class="toc-text">compose函数(从右向左执行函数)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pipe函数-从左向右执行函数"><span class="toc-number">1.0.46.</span> <span class="toc-text">pipe函数(从左向右执行函数)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将异步函数转换为一个promise"><span class="toc-number">1.0.47.</span> <span class="toc-text">将异步函数转换为一个promise</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#顺序执行一系列的promise"><span class="toc-number">1.0.48.</span> <span class="toc-text">顺序执行一系列的promise</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#延迟异步函数的执行"><span class="toc-number">1.0.49.</span> <span class="toc-text">延迟异步函数的执行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回一组数据的平均值"><span class="toc-number">1.0.50.</span> <span class="toc-text">返回一组数据的平均值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回一组数据的总和"><span class="toc-number">1.0.51.</span> <span class="toc-text">返回一组数据的总和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Collatz算法-如果n是偶数-则返回n-2。否则返回3n-1"><span class="toc-number">1.0.52.</span> <span class="toc-text">Collatz算法(如果n是偶数, 则返回n/2。否则返回3n+1)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将数字转换为数组"><span class="toc-number">1.0.53.</span> <span class="toc-text">将数字转换为数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#计算两点之间的距离"><span class="toc-number">1.0.54.</span> <span class="toc-text">计算两点之间的距离</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#计算一个数字的阶乘"><span class="toc-number">1.0.55.</span> <span class="toc-text">计算一个数字的阶乘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#包含斐波那契值的数组"><span class="toc-number">1.0.56.</span> <span class="toc-text">包含斐波那契值的数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#计算两个数字的最大公约数-important"><span class="toc-number">1.0.57.</span> <span class="toc-text">计算两个数字的最大公约数(important)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#计算两个数字的最小公倍数-important"><span class="toc-number">1.0.58.</span> <span class="toc-text">计算两个数字的最小公倍数(important)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回数字数组的中间值"><span class="toc-number">1.0.59.</span> <span class="toc-text">返回数字数组的中间值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回指定范围内的随机整数"><span class="toc-number">1.0.60.</span> <span class="toc-text">返回指定范围内的随机整数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回指定范围内的随机数"><span class="toc-number">1.0.61.</span> <span class="toc-text">返回指定范围内的随机数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将数字保留指定的位数"><span class="toc-number">1.0.62.</span> <span class="toc-text">将数字保留指定的位数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#返回数字数组的标准差"><span class="toc-number">1.0.63.</span> <span class="toc-text">返回数字数组的标准差</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#从json对象中移除指定属性之外的任何特性"><span class="toc-number">1.0.64.</span> <span class="toc-text">从json对象中移除指定属性之外的任何特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#从给定的键值对创建对象"><span class="toc-number">1.0.65.</span> <span class="toc-text">从给定的键值对创建对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将json对象转化为键值对数组"><span class="toc-number">1.0.66.</span> <span class="toc-text">将json对象转化为键值对数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#浅复制"><span class="toc-number">1.0.67.</span> <span class="toc-text">浅复制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将字符串中每个单词的首字母大写"><span class="toc-number">1.0.68.</span> <span class="toc-text">将字符串中每个单词的首字母大写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#转义正则表达式中用到的字符"><span class="toc-number">1.0.69.</span> <span class="toc-text">转义正则表达式中用到的字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将驼峰法字符串转换为指定形式"><span class="toc-number">1.0.70.</span> <span class="toc-text">将驼峰法字符串转换为指定形式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为字符串加…"><span class="toc-number">1.0.71.</span> <span class="toc-text">为字符串加…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hexToRgb"><span class="toc-number">1.0.72.</span> <span class="toc-text">hexToRgb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RGBToHex"><span class="toc-number">1.0.73.</span> <span class="toc-text">RGBToHex</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#生成UUID"><span class="toc-number">1.0.74.</span> <span class="toc-text">生成UUID</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#验证邮箱"><span class="toc-number">1.0.75.</span> <span class="toc-text">验证邮箱</span></a></li></ol></li></ol></li></ol>
                </div>
            
        
        
            <p>javascript.</p>
<a id="more"></a>
<p>原文：<a href="https://github.com/2json/snippets" target="_blank" rel="external">https://github.com/2json/snippets</a></p>
<h1 id="The-common-snippets-of-the-javascript-blush"><a href="#The-common-snippets-of-the-javascript-blush" class="headerlink" title="The common snippets of the javascript :blush:"></a>The common snippets of the javascript :blush:</h1><h4 id="防反跳-debounce"><a href="#防反跳-debounce" class="headerlink" title="防反跳 / debounce"></a>防反跳 / debounce</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> debounce = <span class="function">(<span class="params">action, delay</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">let</span> timer</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> context = <span class="keyword">this</span></div><div class="line">    <span class="keyword">var</span> args = <span class="built_in">arguments</span></div><div class="line">    clearTimeout(timer)</div><div class="line">    timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123; action.apply(context, args) &#125;, delay)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="拉平数组-flatten"><a href="#拉平数组-flatten" class="headerlink" title="拉平数组 / flatten"></a>拉平数组 / flatten</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> flatten = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">let</span> list = []</div><div class="line">    <span class="keyword">const</span> flattenFunc = <span class="function"><span class="params">arg</span> =&gt;</span> arg.forEach(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">Array</span>.isArray(item) ? flattenFunc(item) : list.push(item))</div><div class="line">    flattenFunc(arr)</div><div class="line">    <span class="keyword">return</span> list</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="获取函数的返回值-value"><a href="#获取函数的返回值-value" class="headerlink" title="获取函数的返回值 / value"></a>获取函数的返回值 / value</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> value = <span class="function"><span class="params">func</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> valueFunc = <span class="function"><span class="params">arg</span> =&gt;</span> <span class="keyword">typeof</span> arg === <span class="string">'function'</span> ? valueFunc(arg()) : arg</div><div class="line">  <span class="keyword">return</span> valueFunc(func)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="动态加载javascript"><a href="#动态加载javascript" class="headerlink" title="动态加载javascript"></a>动态加载javascript</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScript</span>(<span class="params">url, callback</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</div><div class="line">  script.type = <span class="string">'text/javascript'</span>;</div><div class="line"></div><div class="line">  <span class="keyword">if</span>(script.readyState)&#123; <span class="comment">//IE</span></div><div class="line">    script.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">if</span>(script.readyState === <span class="string">'loaded'</span> || script.readyState === <span class="string">'complete'</span>)&#123;</div><div class="line">        script.onreadystatechange = <span class="literal">null</span>;</div><div class="line">        callback()</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;<span class="keyword">else</span>&#123; <span class="comment">//Others</span></div><div class="line">    script.onload = callback.call(<span class="keyword">this</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  script.url = url;</div><div class="line">  <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].appendChild(script);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>From:<a href="https://www.nczonline.net/blog/2009/07/28/the-best-way-to-load-external-javascript/" target="_blank" rel="external">The best way to load external JavaScript</a></p>
</blockquote>
<h4 id="移动端页面初始化"><a href="#移动端页面初始化" class="headerlink" title="移动端页面初始化"></a>移动端页面初始化</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params">factory</span>)</span>&#123;</div><div class="line">  <span class="built_in">window</span>.factory = factory(<span class="built_in">window</span>, <span class="built_in">document</span>);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="built_in">window</span>.factory;</div><div class="line">&#125;)(<span class="function"><span class="keyword">function</span>(<span class="params">win, doc</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> context = &#123;</div><div class="line">    init:<span class="function"><span class="keyword">function</span>(<span class="params">scale</span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> html = <span class="built_in">document</span>.documentElement;</div><div class="line">      <span class="keyword">var</span> width = html.clientWidth &gt; scale ? scale : html.clientWidth;</div><div class="line">      <span class="keyword">var</span> dpr = <span class="built_in">window</span>.devicePixelRatio &gt;= <span class="number">1.5</span> ? <span class="number">2</span> : <span class="built_in">window</span>.devicePixelRatio;</div><div class="line"></div><div class="line">      <span class="comment">//设置html的dpr和fontsize</span></div><div class="line">      html.setAttribute(<span class="string">'data-dpr'</span>, dpr);</div><div class="line">      html.style.fontSize = width * <span class="number">100</span> / scale + <span class="string">'px'</span>;</div><div class="line"></div><div class="line">      <span class="comment">//设置body的宽度--可以解决微信内置浏览器里面的一个小bug</span></div><div class="line">      <span class="keyword">this</span>.setBody();</div><div class="line">    &#125;,</div><div class="line">    view:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> &#123;</div><div class="line">        w:<span class="built_in">document</span>.documentElement.clientWidth,</div><div class="line">        h:<span class="built_in">document</span>.documentElement.clientHeight</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    setBody:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">var</span> body = <span class="built_in">document</span>.body;</div><div class="line">      body.style.width = <span class="keyword">this</span>.view().w + <span class="string">'px'</span>;</div><div class="line">      body.style.height = <span class="keyword">this</span>.view().h + <span class="string">'px'</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h4 id="获取随机数"><a href="#获取随机数" class="headerlink" title="获取随机数"></a>获取随机数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandom</span>(<span class="params">min, max</span>)</span>&#123;</div><div class="line">  <span class="comment">//左开右闭</span></div><div class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>) + min);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandom</span>(<span class="params">min, max</span>)</span>&#123;</div><div class="line">  <span class="comment">//左闭右开</span></div><div class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>) + min);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRandom</span>(<span class="params">min, max</span>)</span>&#123;</div><div class="line">  <span class="comment">//闭区间</span></div><div class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.round(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>) + min, <span class="number">10</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="获取元素的计算之后的样式"><a href="#获取元素的计算之后的样式" class="headerlink" title="获取元素的计算之后的样式"></a>获取元素的计算之后的样式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getStyle</span>(<span class="params">obj, attr</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> obj.currentStyle ? obj.currentStyle[attr] : getComputedStyle(obj, <span class="literal">null</span>)[attr];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="判断对象的数据类型"><a href="#判断对象的数据类型" class="headerlink" title="判断对象的数据类型"></a>判断对象的数据类型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">type</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj).match(<span class="regexp">/\s(\w+)/</span>)[<span class="number">1</span>].toLowerCase();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="对象复制"><a href="#对象复制" class="headerlink" title="对象复制"></a>对象复制</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy</span>(<span class="params">obj, deep</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> result = <span class="string">''</span>;</div><div class="line">  <span class="keyword">if</span>(type(obj) !== <span class="string">'object'</span>) <span class="keyword">return</span>;</div><div class="line">  <span class="comment">//利用JSON的方法进行深复制和浅复制</span></div><div class="line">  <span class="keyword">return</span> result = deep ? <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj)) : obj;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="判断网页是否在微信浏览器打开"><a href="#判断网页是否在微信浏览器打开" class="headerlink" title="判断网页是否在微信浏览器打开"></a>判断网页是否在微信浏览器打开</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isWeChat</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> navigator.userAgent.toLowerCase().match(<span class="regexp">/MicroMessenger/i</span>) === <span class="string">"micromessenger"</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="判断手机系统"><a href="#判断手机系统" class="headerlink" title="判断手机系统"></a>判断手机系统</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isApple</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="regexp">/ip(hone|ad|od)/i</span>.test(navigator.userAgent.toLowerCase());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isAndroid</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="regexp">/android/i</span>.test(navigator.userAgent.toLowerCase());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="获取查询字符串的值"><a href="#获取查询字符串的值" class="headerlink" title="获取查询字符串的值"></a>获取查询字符串的值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getQuery</span>(<span class="params">url</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> arr = [];</div><div class="line">  <span class="keyword">var</span> query = &#123;&#125;;</div><div class="line"></div><div class="line">  url = url &amp;&amp; url.charAt(<span class="number">0</span>) === <span class="string">'?'</span> ? url.slice(<span class="number">1</span>) : url || location.search.slice(<span class="number">1</span>);</div><div class="line">  arr = url.split(<span class="string">'&amp;'</span>);</div><div class="line"></div><div class="line">  arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> a = v.split(<span class="string">'='</span>);</div><div class="line">    query[a[<span class="number">0</span>]] = <span class="built_in">encodeURIComponent</span>(a[<span class="number">1</span>]);</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  <span class="keyword">return</span> query;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="获取元素在页面中的位置"><a href="#获取元素在页面中的位置" class="headerlink" title="获取元素在页面中的位置"></a>获取元素在页面中的位置</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPosition</span>(<span class="params">ele</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> position = &#123;</div><div class="line">    left:ele.offsetLeft,</div><div class="line">    top:ele.offsetTop</div><div class="line">  &#125;;</div><div class="line">  <span class="keyword">var</span> currentParent = ele.offsetParent;</div><div class="line"></div><div class="line">  <span class="keyword">while</span> (currentParent !== <span class="literal">null</span>) &#123;</div><div class="line">    position.left += currentParent.offsetLeft;</div><div class="line">    position.top += currentParent.offsetTop;</div><div class="line">    currentParent = currentParent.offsetParent;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> position;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPosition</span>(<span class="params">ele</span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> ele.getBoundingClientRect();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="js仿照md5"><a href="#js仿照md5" class="headerlink" title="js仿照md5"></a>js仿照md5</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">md5</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> str = <span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'</span>;</div><div class="line">  <span class="keyword">return</span> str.split(<span class="string">''</span>).sort(<span class="function"><span class="keyword">function</span>(<span class="params">v1,v2</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.random() &gt; <span class="number">0.5</span>;</div><div class="line">  &#125;).join(<span class="string">''</span>).slice(<span class="number">0</span>, <span class="number">32</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="获取星期几"><a href="#获取星期几" class="headerlink" title="获取星期几"></a>获取星期几</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDay</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> arr = [<span class="string">'星期天'</span>, <span class="string">'星期一'</span>, <span class="string">'星期二'</span>, <span class="string">'星期三'</span>, <span class="string">'星期四'</span>, <span class="string">'星期五'</span>, <span class="string">'星期六'</span>];</div><div class="line">  <span class="keyword">return</span> arr[<span class="keyword">new</span> <span class="built_in">Date</span>().getDay()];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="requestAnimationFrame的兼容性处理"><a href="#requestAnimationFrame的兼容性处理" class="headerlink" title="requestAnimationFrame的兼容性处理"></a>requestAnimationFrame的兼容性处理</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">;(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> lastTime = <span class="number">0</span>;</div><div class="line">  <span class="keyword">var</span> vendors = [<span class="string">'ms'</span>, <span class="string">'moz'</span>, <span class="string">'webkit'</span>, <span class="string">'o'</span>];</div><div class="line"></div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; vendors.length &amp;&amp; !<span class="built_in">window</span>.requestAnimationFrame; ++i)&#123;</div><div class="line">    <span class="built_in">window</span>.requestAnimationFrame = <span class="built_in">window</span>[vendors[i] + <span class="string">'RequestAnimationFrame'</span>];</div><div class="line">    <span class="built_in">window</span>.cancelAnimationFrame = <span class="built_in">window</span>[vendors[i] + <span class="string">'CancelAnimationFrame'</span>] ||  <span class="built_in">window</span>[vendors[x] + <span class="string">'CancelRequestAnimationFrame'</span>];</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">if</span> (!<span class="built_in">window</span>.requestAnimationFrame) <span class="built_in">window</span>.requestAnimationFrame = <span class="function"><span class="keyword">function</span>(<span class="params">callback, element</span>) </span>&#123;</div><div class="line">      <span class="keyword">var</span> currTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</div><div class="line">      <span class="keyword">var</span> timeToCall = <span class="built_in">Math</span>.max(<span class="number">0</span>, <span class="number">16</span> - (currTime - lastTime));</div><div class="line">      <span class="keyword">var</span> id = <span class="built_in">window</span>.setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">          callback(currTime + timeToCall);</div><div class="line">      &#125;, timeToCall);</div><div class="line">      lastTime = currTime + timeToCall;</div><div class="line">      <span class="keyword">return</span> id;</div><div class="line">  &#125;;</div><div class="line">  <span class="keyword">if</span> (!<span class="built_in">window</span>.cancelAnimationFrame) <span class="built_in">window</span>.cancelAnimationFrame = <span class="function"><span class="keyword">function</span>(<span class="params">id</span>) </span>&#123;</div><div class="line">      clearTimeout(id);</div><div class="line">  &#125;;</div><div class="line">&#125;)()</div></pre></td></tr></table></figure>
<h4 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(<span class="keyword">this</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> sortArr = <span class="keyword">this</span>.sort();</div><div class="line">  <span class="keyword">return</span> sortArr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">v,i,context</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> v != context[i+<span class="number">1</span>];</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> result = [];</div><div class="line">  <span class="keyword">this</span>.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span>(result.indexOf(v) === <span class="number">-1</span>)&#123;</div><div class="line">      result.push(v);</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">  <span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> json = &#123;&#125;;</div><div class="line">  <span class="keyword">var</span> result = [];</div><div class="line">  <span class="keyword">this</span>.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> type = <span class="built_in">Object</span>.prototype.toString.call(value).match(<span class="regexp">/\s(\w+)/</span>)[<span class="number">1</span>].toLowerCase();</div><div class="line">    <span class="keyword">if</span>(!((type + <span class="string">'-'</span>+value) <span class="keyword">in</span> json))&#123;</div><div class="line">      json[type + <span class="string">'-'</span>+value] = <span class="literal">true</span>;</div><div class="line">      result.push(value);</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">  <span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> sortArr = <span class="keyword">this</span>.sort(),</div><div class="line">    i = <span class="number">0</span>;</div><div class="line">  <span class="keyword">for</span>(; i &lt; sortArr.length; i++)&#123;</div><div class="line">    <span class="keyword">if</span>(sortArr[i] === sortArr[i+<span class="number">1</span>])&#123;</div><div class="line">      sortArr.splice(i,<span class="number">1</span>);</div><div class="line">      i--;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> sortArr;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Array</span>.prototype.unique = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> sortArr = <span class="keyword">this</span>.sort(), result = [];</div><div class="line">  sortArr.reduce(<span class="function">(<span class="params">v1,v2</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span>(v1 !== v2)&#123;</div><div class="line">      result.push(v1);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> v2;</div><div class="line">  &#125;)</div><div class="line">  result.push(sortArr[sortArr.length - <span class="number">1</span>]);</div><div class="line">  <span class="keyword">return</span> result;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="操作className"><a href="#操作className" class="headerlink" title="操作className"></a>操作className</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//操作className时候的辅助函数</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">toArray</span>(<span class="params">argu</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> splitText = <span class="keyword">typeof</span> argu === <span class="string">'string'</span> ? (argu.indexOf(<span class="string">' '</span>) !== <span class="number">-1</span> ? <span class="string">' '</span> : <span class="string">','</span>) : <span class="string">' '</span>;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(argu) ? argu : argu.split(splitText);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>说明：以下四种方法的参数的形式可以为以下几种</p>
<ul>
<li>数组：[‘classname1’, ‘classname2’]</li>
<li>string<ul>
<li>单字符串:’classname1’</li>
<li>空格分隔: ‘classname1 classname2’</li>
<li>逗号分隔: ‘classname1, classname2’</li>
</ul>
</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">HTMLElement.prototype.hasClass = <span class="function"><span class="keyword">function</span> (<span class="params">classname</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> selfClass = <span class="keyword">this</span>.className.split(<span class="string">' '</span>);</div><div class="line">      classname = toArray(classname);</div><div class="line">  <span class="keyword">if</span>(<span class="keyword">this</span>.classList)&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> classname)&#123;</div><div class="line">      <span class="keyword">if</span>(!<span class="keyword">this</span>.classList.contains(v))&#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;<span class="keyword">else</span>&#123;</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> classname)&#123;</div><div class="line">      <span class="keyword">if</span>(selfClass.indexOf(v) === <span class="number">-1</span>)&#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">HTMLElement.prototype.addClass = <span class="function"><span class="keyword">function</span> (<span class="params">classname</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.className = <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>((toArray(classname).join(<span class="string">' '</span>) + <span class="string">' '</span> + <span class="keyword">this</span>.className).split(<span class="string">' '</span>))).join(<span class="string">' '</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">HTMLElement.prototype.addClass = <span class="function"><span class="keyword">function</span> (<span class="params">classname</span>) </span>&#123;</div><div class="line">  classname = toArray(classname);</div><div class="line">  classname.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span>(!<span class="keyword">this</span>.hasClass(v))&#123;</div><div class="line">      <span class="keyword">this</span>.className += <span class="string">' '</span> + v;</div><div class="line">    &#125;</div><div class="line">  &#125;.bind(<span class="keyword">this</span>))</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">HTMLElement.prototype.removeClass = <span class="function"><span class="keyword">function</span> (<span class="params">classname</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> selfClass = <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(<span class="keyword">this</span>.className.split(<span class="string">' '</span>)));</div><div class="line">      classname = toArray(classname);</div><div class="line">  classname.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span>(selfClass.indexOf(v) !== <span class="number">-1</span>)&#123;</div><div class="line">      selfClass.splice(selfClass.indexOf(v), <span class="number">1</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">  <span class="keyword">this</span>.className = selfClass.join(<span class="string">' '</span>);</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">HTMLElement.prototype.toggleClass = <span class="function"><span class="keyword">function</span> (<span class="params">classname</span>) </span>&#123;</div><div class="line">  classname = toArray(classname);</div><div class="line">  classname.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</div><div class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>.hasClass(v))&#123;</div><div class="line">      <span class="keyword">this</span>.removeClass(v)</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">      <span class="keyword">this</span>.addClass(v);</div><div class="line">    &#125;</div><div class="line">  &#125;.bind(<span class="keyword">this</span>))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="判断网页运行在电脑还是手机"><a href="#判断网页运行在电脑还是手机" class="headerlink" title="判断网页运行在电脑还是手机"></a>判断网页运行在电脑还是手机</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//返回true是手机，否则是电脑</span></div><div class="line"><span class="keyword">const</span> isMobile = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> [<span class="string">'android'</span>, <span class="string">'iphone'</span>, <span class="string">'symbianos'</span>, <span class="string">'windows phone'</span>, <span class="string">'ipad'</span>, <span class="string">'ipod'</span>].some(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> navigator.userAgent.toLowerCase().indexOf(v) &gt;= <span class="number">0</span>;</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="转意html"><a href="#转意html" class="headerlink" title="转意html"></a>转意html</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> escapeHTML = <span class="function">(<span class="params">html</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">let</span> htmlMap = &#123;</div><div class="line">    <span class="string">'&lt;'</span>: <span class="string">"&amp;lt;"</span>,</div><div class="line">    <span class="string">'&gt;'</span>:<span class="string">'&amp;gt;'</span>,</div><div class="line">    <span class="string">'&amp;'</span>:<span class="string">'&amp;amp'</span>,</div><div class="line">    <span class="string">'"'</span>:<span class="string">'&amp;quot;'</span></div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> html.replace(<span class="regexp">/[&lt;&gt;"&amp;]/g</span>, (char) =&gt; htmlMap[char]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="操作cookie"><a href="#操作cookie" class="headerlink" title="操作cookie"></a>操作cookie</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  这里主要是一些操作cookie时候的一些工具方法</span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Utils</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">//第一个方法主要用于转义cookie里面的特殊字符</span></div><div class="line">  encode(str)&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">String</span>(str).replace(<span class="regexp">/[,;"\s%\\]/g</span>, (c) =&gt; <span class="built_in">encodeURIComponent</span>(c));</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">//第二个方法主要是用于对比编码的字符串进行解码的方法</span></div><div class="line">  decode(str)&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">decodeURIComponent</span>(str);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">//第三个方法主要是用于判断变量是不是纯粹的javascript对象的方法</span></div><div class="line">  isPlainObject(obj)&#123;</div><div class="line">    <span class="keyword">return</span> !!obj &amp;&amp; <span class="built_in">Object</span>.prototype.toString.call(obj) === <span class="string">'[object Object]'</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">//第四个方法主要是进行回退的方法</span></div><div class="line">  fallback(value, fallback)&#123;</div><div class="line">    <span class="keyword">return</span> value == <span class="literal">null</span> ? fallback : value;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Utils();</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> util <span class="keyword">from</span> <span class="string">'./utils.js'</span>;</div><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment">  这个是操作cookie的主要的类</span></div><div class="line"><span class="comment">*/</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cookie</span></span>&#123;</div><div class="line"></div><div class="line">  <span class="keyword">constructor</span>(config)&#123;</div><div class="line">    <span class="keyword">this</span>.defaultConfig = util.isPlainObject(config) ? config : &#123;<span class="attr">path</span>: <span class="string">'/'</span>, <span class="attr">domain</span>:<span class="string">''</span>, <span class="attr">secure</span>: <span class="literal">false</span>, <span class="attr">expires</span>: <span class="number">1</span>&#125;;</div><div class="line">    <span class="keyword">this</span>.defaultTime = <span class="number">60</span> * <span class="number">60</span> *<span class="number">24</span> * <span class="number">1000</span>;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  set(key, value, options)&#123;</div><div class="line">    <span class="comment">//设置cookie的方法--主要有两种设置形式，key为字符串或者对象也可以是数组。当key是字符串的时候，value就是其对应的值，当key是对象的时候，则键表示cookie的名称</span></div><div class="line">    <span class="comment">//值表示cookie的值，value参数则是options设置对象，此时所有的cookie共用一个相同的选项设置对象</span></div><div class="line">    <span class="comment">//当cookie是数组的时候，设置形式如下 [&#123;name:value, 'options':&#123;这个对象就是对应的配置选项&#125;&#125;,...]</span></div><div class="line">    <span class="comment">//name就是cookie的名称 value就是cookie的值  option就是这个cookie对应的选项对象</span></div><div class="line"></div><div class="line">    <span class="comment">//先判断是不是对象--是对象的话，就利用循环转换成不是对象的cookie的设置方式</span></div><div class="line">    <span class="keyword">if</span>(util.isPlainObject(key))&#123;</div><div class="line">      <span class="comment">//key是对象的情况--先判断一下key.option是否存在，存在则使用这个，不存在则使用options。注意这个时候的options是设置在value上的</span></div><div class="line">      value = key.option ? key.option : value;</div><div class="line">      <span class="built_in">Object</span>.keys(key).forEach(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</div><div class="line">        v !== <span class="string">'option'</span> &amp;&amp; <span class="keyword">this</span>.set(v, key[v], value);</div><div class="line">      &#125;)</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">Array</span>.isArray(key))&#123;</div><div class="line">      <span class="comment">//key是数组的情况</span></div><div class="line">      key.forEach(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">this</span>.set(v, value);</div><div class="line">      &#125;)</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">      <span class="comment">//key是字符串的情况</span></div><div class="line">      <span class="comment">//先对options进行类型的判断</span></div><div class="line">      options = util.isPlainObject(options) ? options : &#123;<span class="attr">expires</span>:<span class="number">1</span>&#125;</div><div class="line">      <span class="comment">//然后再获取到cookie中最重要的一项设置--expires</span></div><div class="line">      <span class="keyword">let</span> expires = options.expires || <span class="keyword">this</span>.defaultConfig.expires || <span class="number">1</span>;</div><div class="line">      <span class="keyword">let</span> path = options.path || <span class="keyword">this</span>.defaultConfig.path || <span class="string">'/'</span>;</div><div class="line">      <span class="keyword">let</span> secure = options.secure || <span class="keyword">this</span>.defaultConfig.secure || <span class="literal">false</span>;</div><div class="line">      <span class="keyword">let</span> domain = options.domain || <span class="keyword">this</span>.defaultConfig.domain || <span class="string">''</span>;</div><div class="line">      <span class="keyword">let</span> expiresType = <span class="keyword">typeof</span> expires;</div><div class="line">      <span class="keyword">if</span>(expiresType === <span class="string">'string'</span>)&#123;</div><div class="line">        expires = <span class="keyword">new</span> <span class="built_in">Date</span>(expires);</div><div class="line">      &#125;<span class="keyword">else</span> <span class="keyword">if</span>(expiresType === <span class="string">'number'</span>)&#123;</div><div class="line">        expires = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.now() + <span class="keyword">this</span>.defaultTime * expires);</div><div class="line">      &#125;</div><div class="line">      <span class="comment">//然后在对expires进行标准化</span></div><div class="line">      (<span class="string">'toGMTString'</span> <span class="keyword">in</span> expires) &amp;&amp; (expires = expires.toGMTString());</div><div class="line">      <span class="comment">//设置cookie</span></div><div class="line">      <span class="built_in">document</span>.cookie = <span class="string">`<span class="subst">$&#123;util.encode(key)&#125;</span>=<span class="subst">$&#123;util.encode(value)&#125;</span>; path=<span class="subst">$&#123;path&#125;</span>; domain=<span class="subst">$&#123;domain&#125;</span>; expires=<span class="subst">$&#123;expires&#125;</span>; secure=<span class="subst">$&#123;secure&#125;</span>`</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  &#125;</div><div class="line"></div><div class="line">  get(key)&#123;</div><div class="line">    <span class="comment">//获取cookie的方法--如果不传递参数，则默认是获取所有的cookie,以json对象的形式返回-也可以传递一个参数--获取指定名称的cookie</span></div><div class="line">    <span class="keyword">let</span> cookies = <span class="built_in">document</span>.cookie;</div><div class="line">    <span class="keyword">let</span> cookieResult = &#123;&#125;;</div><div class="line">    <span class="keyword">let</span> result = &#123;&#125;;</div><div class="line"></div><div class="line">    <span class="comment">//浏览器客户端没有cookie，则直接返回</span></div><div class="line">    <span class="keyword">if</span>(cookies == <span class="string">""</span>) <span class="keyword">return</span>;</div><div class="line"></div><div class="line">    cookies.split(<span class="string">'; '</span>).forEach(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</div><div class="line">      value.replace(<span class="regexp">/^(.+)=(.+)$/g</span>, (a, k, v) =&gt; &#123;</div><div class="line">        cookieResult[k] = v;</div><div class="line">      &#125;)</div><div class="line">    &#125;)</div><div class="line">    <span class="comment">//利用参数判断返回的情况</span></div><div class="line">    <span class="comment">//这里主要分三种情况--1、key是字符串，返回对应的cookie值--2、key是数组，返回一个包含这些名称的json对象--3、key不存在，直接返回所有的cookie，json对象格式</span></div><div class="line">    <span class="keyword">if</span>(key &amp;&amp; <span class="built_in">Array</span>.isArray(key))&#123;</div><div class="line">      key.forEach(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</div><div class="line">        result[v] = cookieResult[v];</div><div class="line">      &#125;)</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(key &amp;&amp; <span class="keyword">typeof</span> key === <span class="string">'string'</span>)&#123;</div><div class="line">      result = cookieResult[key];</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">      result = cookieResult;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  clear(key)&#123;</div><div class="line">    <span class="comment">//删除cookie的方法</span></div><div class="line">    <span class="comment">//分三种情况--1、key为undefined：删除所有的cookie</span></div><div class="line">    <span class="comment">//           2、key为数组：删除数组内指定的cookie</span></div><div class="line">    <span class="comment">//           3、key为字符串：删除指定名称的cookie</span></div><div class="line">    <span class="keyword">let</span> keyArr = <span class="built_in">Array</span>.isArray(key) ? key : (key !== <span class="literal">undefined</span> ? [key] : <span class="built_in">Object</span>.keys(<span class="keyword">this</span>.get()));</div><div class="line">    keyArr.forEach(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</div><div class="line">      <span class="keyword">this</span>.set(v, <span class="string">''</span>, &#123;<span class="attr">expires</span>:<span class="number">-1</span>&#125;);</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  isabled()&#123;</div><div class="line">    <span class="comment">//判断cookie是否能用的方法</span></div><div class="line">    <span class="keyword">return</span> navigator.cookieEnabled;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> Cookie;</div></pre></td></tr></table></figure>
<h3 id="函数节流"><a href="#函数节流" class="headerlink" title="函数节流"></a>函数节流</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">func, wait, options</span>)</span>&#123;</div><div class="line">  <span class="comment">//设置三个变量用于保存信息</span></div><div class="line">  <span class="keyword">var</span> context,  <span class="comment">//保存上下文</span></div><div class="line">      args, <span class="comment">//保存参数</span></div><div class="line">      result; <span class="comment">//保存函数的返回值</span></div><div class="line"></div><div class="line">  <span class="comment">//设置一个保存定时器的timer</span></div><div class="line">  <span class="keyword">var</span> timeout = <span class="literal">null</span>;</div><div class="line"></div><div class="line">  <span class="comment">//设置上一次函数执行的时间戳</span></div><div class="line">  <span class="keyword">var</span> previous = <span class="number">0</span>;</div><div class="line"></div><div class="line">  <span class="comment">//设置options的默认值</span></div><div class="line">  <span class="keyword">if</span>(!options)&#123;</div><div class="line">    options = &#123;&#125;;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="comment">//设置执行函数</span></div><div class="line">  <span class="keyword">var</span> later = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="comment">//如果options.leading为false则每次出发回调后将previous置为0</span></div><div class="line">    previous = options.leading === <span class="literal">false</span> ? <span class="number">0</span> : <span class="built_in">Date</span>.now();</div><div class="line"></div><div class="line">    timeout = <span class="literal">null</span>;</div><div class="line"></div><div class="line">    result = func.apply(context, args);</div><div class="line"></div><div class="line">    <span class="keyword">if</span>(!timeout)&#123;</div><div class="line">      context = args = <span class="literal">null</span>;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">//先保存这次函数的执行时间</span></div><div class="line">    <span class="keyword">var</span> now = <span class="built_in">Date</span>.now();</div><div class="line"></div><div class="line">    <span class="comment">//接着判断是否需要在刚刚开始的时候执行函数</span></div><div class="line">    <span class="keyword">if</span>(!previous &amp;&amp; options.leading === <span class="literal">false</span>)&#123;</div><div class="line">      <span class="comment">//进到这里面说明就不需要</span></div><div class="line">      previous = now;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//接着在获取到时间的差值</span></div><div class="line">    <span class="keyword">var</span> remaining = wait - (now - previous);  <span class="comment">//主要比较的就是两次函数的执行时间和预先设定的时间的差值</span></div><div class="line"></div><div class="line">    <span class="comment">//保存这个函数的上下文和参数</span></div><div class="line">    context = <span class="keyword">this</span>;</div><div class="line">    args = <span class="built_in">arguments</span>;</div><div class="line"></div><div class="line">    <span class="comment">//开始根据判断条件进行函数的调用</span></div><div class="line">    <span class="keyword">if</span>(remaining &lt; <span class="number">0</span> || remaining &gt; wait)&#123;</div><div class="line">      <span class="comment">//进入到这里就表示函数可以进行调用了</span></div><div class="line">      <span class="comment">//remaining &lt; 0 一开始就要执行</span></div><div class="line">      <span class="comment">//remaining &gt; wait 正常的执行条件</span></div><div class="line"></div><div class="line">      <span class="keyword">if</span>(timeout)&#123;</div><div class="line">        <span class="comment">//如果存在定时器，说明还有没有执行的定时器，清除掉</span></div><div class="line">        clearTimeout(timeout);</div><div class="line">        timeout = <span class="literal">null</span>;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="comment">//重置这次函数的执行时间，下次执行的时候需要判断</span></div><div class="line">      previous = now;</div><div class="line"></div><div class="line">      <span class="comment">//执行函数</span></div><div class="line">      result = func.apply(context, args);</div><div class="line"></div><div class="line">      <span class="comment">//重置变量，防止内存泄漏</span></div><div class="line">      <span class="keyword">if</span>(!timeout)&#123;</div><div class="line">        context = args = <span class="literal">null</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(!timeout &amp;&amp; options.trailing !== <span class="literal">false</span>)&#123;</div><div class="line">      <span class="comment">//最后一次需要出发的情况</span></div><div class="line">      timeout = setTimeout(later,remaining);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//返回结果</span></div><div class="line">    <span class="keyword">return</span> result;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="函数去抖"><a href="#函数去抖" class="headerlink" title="函数去抖"></a>函数去抖</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">func, wait, immedicate</span>)</span>&#123;</div><div class="line">  <span class="comment">/*</span></div><div class="line"><span class="comment">    参数的基本解释：</span></div><div class="line"><span class="comment">      func: function 需要进行去抖的函数</span></div><div class="line"><span class="comment">      wait： 去抖时间</span></div><div class="line"><span class="comment">      immedicate： 设置去抖函数的触发时机，设置为true则事件发生的时候立即触发。否则在事件结束wait时间之后触发</span></div><div class="line"><span class="comment">  */</span></div><div class="line"></div><div class="line">  <span class="comment">//设置几个需要用到的局部变量</span></div><div class="line">  <span class="keyword">var</span> context, <span class="comment">//存储this</span></div><div class="line">      args, <span class="comment">//存储传递给去抖函数的参数</span></div><div class="line">      timestamp, <span class="comment">//存储每次函数触发的时间</span></div><div class="line">      timeout, <span class="comment">//存储对定时器的引用</span></div><div class="line">      result; <span class="comment">//存储原函数的返回值</span></div><div class="line"></div><div class="line">      <span class="comment">//主要就是这个函数，这个函数就是定时器调用的函数，我们需要在这个函数里面做一件十分重要的事就是判断函数触发的时机</span></div><div class="line"></div><div class="line">      <span class="keyword">var</span> later = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">//首先获取时间差</span></div><div class="line">        <span class="keyword">var</span> last = <span class="built_in">Date</span>.now() - timestamp;</div><div class="line"></div><div class="line">        <span class="comment">//再看一下有没有达到函数调用的时间</span></div><div class="line">        <span class="keyword">if</span>(last &lt; wait &amp;&amp; last &gt;= <span class="number">0</span>)&#123;</div><div class="line">          <span class="comment">//重置函数调用</span></div><div class="line">          timeout = setTimeout(later, wait - last);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">          <span class="comment">//说明可以调用函数了，</span></div><div class="line">          <span class="comment">//吧timeout设置为null，以便下次判断</span></div><div class="line">          timeout = <span class="literal">null</span>;</div><div class="line">          <span class="comment">//但是需要先判断一下immedicate，因为如果这个为true，则我们不需要调用了</span></div><div class="line">          <span class="keyword">if</span>(!immedicate)&#123;</div><div class="line">            <span class="comment">//说明不是立即调用</span></div><div class="line">            result = func.apply(context, args);</div><div class="line">            <span class="keyword">if</span>(!timeout)&#123;</div><div class="line">              context = args = <span class="literal">null</span>;</div><div class="line">            &#125;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="comment">//闭包的形式，方便传递参数</span></div><div class="line">        context = <span class="keyword">this</span>;</div><div class="line">        args = <span class="built_in">arguments</span>;</div><div class="line"></div><div class="line">        <span class="comment">//每次函数调用的时间</span></div><div class="line">        timestamp = <span class="built_in">Date</span>.now();</div><div class="line"></div><div class="line">        <span class="keyword">var</span> callNow = immedicate &amp;&amp; !timeout; <span class="comment">//immedicate为true且函数不是第一次调用</span></div><div class="line"></div><div class="line">        <span class="keyword">if</span>(!timeout)&#123;</div><div class="line">          <span class="comment">//如果能进到这里，表示的是这个函数不是第一次触发了</span></div><div class="line">          <span class="comment">//如果是第一次触发，我们需要调用定时器了</span></div><div class="line">          timeout = setTimeout(later, wait);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span>(callNow)&#123;</div><div class="line">          <span class="comment">//如果是立即调用，就直接调用func函数</span></div><div class="line">          result = func.apply(context, args);</div><div class="line">          context = args = <span class="literal">null</span>; <span class="comment">//释放资源</span></div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> result;</div><div class="line">      &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="求数组最大值"><a href="#求数组最大值" class="headerlink" title="求数组最大值"></a>求数组最大值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> arrayMax = <span class="function"><span class="params">arr</span> =&gt;</span> <span class="built_in">Math</span>.max(...arr)</div></pre></td></tr></table></figure>
<h3 id="求数组的最小值"><a href="#求数组的最小值" class="headerlink" title="求数组的最小值"></a>求数组的最小值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> arrayMin = <span class="function"><span class="params">arr</span> =&gt;</span> <span class="built_in">Math</span>.min(...arr)</div></pre></td></tr></table></figure>
<h3 id="chunk函数"><a href="#chunk函数" class="headerlink" title="chunk函数"></a>chunk函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> chunk = <span class="function">(<span class="params">arr, size</span>) =&gt;</span> <span class="built_in">Array</span>.from(&#123;<span class="attr">length</span>: <span class="built_in">Math</span>.ceil(arr.length / size)&#125;, (v, i) =&gt; arr.slice(i * size, i * size + size))</div></pre></td></tr></table></figure>
<h3 id="compact-去除数组中值为falsey的元素"><a href="#compact-去除数组中值为falsey的元素" class="headerlink" title="compact: 去除数组中值为falsey的元素"></a>compact: 去除数组中值为falsey的元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> compact = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.filter(<span class="built_in">Boolean</span>)</div></pre></td></tr></table></figure>
<h3 id="计算一个值在数组中出现的次数"><a href="#计算一个值在数组中出现的次数" class="headerlink" title="计算一个值在数组中出现的次数"></a>计算一个值在数组中出现的次数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> countOccurrences = <span class="function">(<span class="params">arr, value</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> v === value ? a + <span class="number">1</span> : a + <span class="number">0</span>, <span class="number">0</span>)</div></pre></td></tr></table></figure>
<h3 id="deepFlatten-拉平数组"><a href="#deepFlatten-拉平数组" class="headerlink" title="deepFlatten: 拉平数组"></a>deepFlatten: 拉平数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> deepFlatten = <span class="function">(<span class="params">arr</span>) =&gt;</span> [].concat(...arr.map(<span class="function"><span class="params">v</span> =&gt;</span> <span class="built_in">Array</span>.isArray(v) ? deepFlatten(v) : v))</div></pre></td></tr></table></figure>
<h3 id="difference-返回数组的差值"><a href="#difference-返回数组的差值" class="headerlink" title="difference: 返回数组的差值"></a>difference: 返回数组的差值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> difference = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b)</div><div class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !s.has(x))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="删除数组中的元素，直到回调函数返回true"><a href="#删除数组中的元素，直到回调函数返回true" class="headerlink" title="删除数组中的元素，直到回调函数返回true"></a>删除数组中的元素，直到回调函数返回true</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> dropElements = <span class="function">(<span class="params">arr, func</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">while</span>(arr.length &gt; <span class="number">0</span> &amp;&amp; !func(arr[<span class="number">0</span>])) &#123;</div><div class="line">    arr.shift()</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> arr</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="返回索引是某个值的倍数的元素"><a href="#返回索引是某个值的倍数的元素" class="headerlink" title="返回索引是某个值的倍数的元素"></a>返回索引是某个值的倍数的元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> everyNth = <span class="function">(<span class="params">arr, nth</span>) =&gt;</span> arr.filter(<span class="function">(<span class="params">e, i</span>) =&gt;</span> i % nth === <span class="number">0</span>)</div></pre></td></tr></table></figure>
<h3 id="过滤出数组中没有重复值的元素"><a href="#过滤出数组中没有重复值的元素" class="headerlink" title="过滤出数组中没有重复值的元素"></a>过滤出数组中没有重复值的元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> filterNoneUnique = <span class="function"><span class="params">arr</span> =&gt;</span> arr.filter(<span class="function"><span class="params">i</span> =&gt;</span> arr.indexOf(i) === arr.lastIndexOf(i))</div></pre></td></tr></table></figure>
<h3 id="拉平数组"><a href="#拉平数组" class="headerlink" title="拉平数组"></a>拉平数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> flatten = <span class="function"><span class="params">arr</span> =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.concat(v), [])</div></pre></td></tr></table></figure>
<h3 id="拉平数组-深拉平"><a href="#拉平数组-深拉平" class="headerlink" title="拉平数组(深拉平)"></a>拉平数组(深拉平)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> flattenDepth = <span class="function">(<span class="params">arr, depth = <span class="number">1</span></span>) =&gt;</span> depth != <span class="number">1</span> ? arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.concat(<span class="built_in">Array</span>.isArray(v) ? flattenDepth(v, depth - <span class="number">1</span>) : v), []) : arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> a.concat(v), [])</div></pre></td></tr></table></figure>
<h3 id="对数组按照特定条件分组"><a href="#对数组按照特定条件分组" class="headerlink" title="对数组按照特定条件分组"></a>对数组按照特定条件分组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> groupBy = <span class="function">(<span class="params">arr, func</span>) =&gt;</span> arr.map(<span class="keyword">typeof</span> func === <span class="string">'function'</span> ? func : <span class="function"><span class="params">val</span> =&gt;</span> val[func])</div><div class="line">                                  .reduce(<span class="function">(<span class="params">acc, val, i</span>) =&gt;</span> &#123;</div><div class="line">                                    acc[val] = (acc[val] || []).concat(arr[i])</div><div class="line">                                    <span class="keyword">return</span> acc</div><div class="line">                                  &#125;, &#123;&#125;)</div></pre></td></tr></table></figure>
<h3 id="返回数组的第一个元素"><a href="#返回数组的第一个元素" class="headerlink" title="返回数组的第一个元素"></a>返回数组的第一个元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> head = <span class="function"><span class="params">arr</span> =&gt;</span> arr[<span class="number">0</span>]</div></pre></td></tr></table></figure>
<h3 id="返回除数组最后一个元素之外的所有元素"><a href="#返回除数组最后一个元素之外的所有元素" class="headerlink" title="返回除数组最后一个元素之外的所有元素"></a>返回除数组最后一个元素之外的所有元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> initial = <span class="function"><span class="params">arr</span> =&gt;</span> arr.slice(<span class="number">0</span>, <span class="number">-1</span>)</div></pre></td></tr></table></figure>
<h3 id="初始化范围数组"><a href="#初始化范围数组" class="headerlink" title="初始化范围数组"></a>初始化范围数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> initializeArrayWithRange = <span class="function">(<span class="params">end, start = <span class="number">0</span></span>) =&gt;</span> <span class="built_in">Array</span>.from(&#123;<span class="attr">length</span>: end - start&#125;).map(<span class="function">(<span class="params">v, i</span>) =&gt;</span> i + start)</div></pre></td></tr></table></figure>
<h3 id="初始化并以特定的值填充数组"><a href="#初始化并以特定的值填充数组" class="headerlink" title="初始化并以特定的值填充数组"></a>初始化并以特定的值填充数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> initializeArrayWithValues = <span class="function">(<span class="params">n, value = <span class="number">0</span></span>) =&gt;</span> <span class="built_in">Array</span>(n).fill(value)</div></pre></td></tr></table></figure>
<h3 id="返回数组交集"><a href="#返回数组交集" class="headerlink" title="返回数组交集"></a>返回数组交集</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> intersection = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>(b)</div><div class="line">  <span class="keyword">return</span> a.filter(<span class="function"><span class="params">x</span> =&gt;</span> s.has(x))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="返回数组的最后一个元素"><a href="#返回数组的最后一个元素" class="headerlink" title="返回数组的最后一个元素"></a>返回数组的最后一个元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> last = <span class="function"><span class="params">arr</span> =&gt;</span> arr[arr.length - <span class="number">1</span>]</div></pre></td></tr></table></figure>
<h3 id="将数组中的值映射到对象"><a href="#将数组中的值映射到对象" class="headerlink" title="将数组中的值映射到对象"></a>将数组中的值映射到对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> mapObject = <span class="function">(<span class="params">arr, fn</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> keyValue = [arr, arr.map(fn)]</div><div class="line">  <span class="keyword">return</span> keyValue[<span class="number">0</span>].reduce(<span class="function">(<span class="params">acc, val, ind</span>) =&gt;</span> (acc[val] = keyValue[<span class="number">1</span>][ind], acc), &#123;&#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="返回数组的第n个元素"><a href="#返回数组的第n个元素" class="headerlink" title="返回数组的第n个元素"></a>返回数组的第n个元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> nthElement = <span class="function">(<span class="params">arr, n = <span class="number">0</span></span>) =&gt;</span> (n &gt; <span class="number">0</span> ? arr.slice(n + <span class="number">1</span>) : arr.slice(n))[<span class="number">0</span>]</div></pre></td></tr></table></figure>
<h3 id="从对象中选取给定键的键值对"><a href="#从对象中选取给定键的键值对" class="headerlink" title="从对象中选取给定键的键值对"></a>从对象中选取给定键的键值对</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> pick = <span class="function">(<span class="params">obj, arr</span>) =&gt;</span> arr.reduce(<span class="function">(<span class="params">acc, curr</span>) =&gt;</span> (curr <span class="keyword">in</span> obj &amp;&amp; (acc[curr] = obj[curr]), acc), &#123;&#125;)</div></pre></td></tr></table></figure>
<h3 id="从数组中筛选指定的值"><a href="#从数组中筛选指定的值" class="headerlink" title="从数组中筛选指定的值"></a>从数组中筛选指定的值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> pull = <span class="function">(<span class="params">arr, ...args</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">let</span> pulled = arr.filter(<span class="function"><span class="params">v</span> =&gt;</span> !args.includes(v))</div><div class="line">  arr.length = <span class="number">0</span></div><div class="line">  pulled.forEach(<span class="function"><span class="params">v</span> =&gt;</span> arr.push(v))</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="从数组中移除使给定函数返回false的元素"><a href="#从数组中移除使给定函数返回false的元素" class="headerlink" title="从数组中移除使给定函数返回false的元素"></a>从数组中移除使给定函数返回false的元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> remove = <span class="function">(<span class="params">arr, func</span>) =&gt;</span> <span class="built_in">Array</span>.isArray(arr) ? arr.filter(func).reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> &#123;</div><div class="line">  arr.splice(arr.indexOf(val), <span class="number">1</span>)</div><div class="line">  <span class="keyword">return</span> acc.concat(val)</div><div class="line">&#125;, []) : []</div></pre></td></tr></table></figure>
<h3 id="返回数组中的随机的元素"><a href="#返回数组中的随机的元素" class="headerlink" title="返回数组中的随机的元素"></a>返回数组中的随机的元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> sample = <span class="function"><span class="params">arr</span> =&gt;</span> arr[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * arr.length)]</div></pre></td></tr></table></figure>
<h3 id="打乱数组的顺序"><a href="#打乱数组的顺序" class="headerlink" title="打乱数组的顺序"></a>打乱数组的顺序</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> shuffle = <span class="function"><span class="params">arr</span> =&gt;</span> arr.sort(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">Math</span>.random() - <span class="number">0.5</span>)</div></pre></td></tr></table></figure>
<h3 id="返回两个数组的交集"><a href="#返回两个数组的交集" class="headerlink" title="返回两个数组的交集"></a>返回两个数组的交集</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> similiarity = <span class="function">(<span class="params">arr, values</span>) =&gt;</span> arr.filter(<span class="function"><span class="params">v</span> =&gt;</span> values.includes(v))</div></pre></td></tr></table></figure>
<h3 id="返回两个数组的差值"><a href="#返回两个数组的差值" class="headerlink" title="返回两个数组的差值"></a>返回两个数组的差值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> symmetricDifference = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> sA = <span class="keyword">new</span> <span class="built_in">Set</span>(a)</div><div class="line">  <span class="keyword">const</span> sB = <span class="keyword">new</span> <span class="built_in">Set</span>(b)</div><div class="line"></div><div class="line">  <span class="keyword">return</span> [</div><div class="line">    ...a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !sB.has(x)),</div><div class="line">    ...b.filter(<span class="function"><span class="params">x</span> =&gt;</span> !sA.has(x))</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="返回数组中第一个之外的元素"><a href="#返回数组中第一个之外的元素" class="headerlink" title="返回数组中第一个之外的元素"></a>返回数组中第一个之外的元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> tail = <span class="function"><span class="params">arr</span> =&gt;</span> arr.length &gt; <span class="number">1</span> ? arr.slice(<span class="number">1</span>) : arr</div></pre></td></tr></table></figure>
<h3 id="返回数组的前n个元素"><a href="#返回数组的前n个元素" class="headerlink" title="返回数组的前n个元素"></a>返回数组的前n个元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> take = <span class="function">(<span class="params">arr, n = <span class="number">1</span></span>) =&gt;</span> arr.slice(<span class="number">0</span>, n)</div></pre></td></tr></table></figure>
<h3 id="返回数组的并集"><a href="#返回数组的并集" class="headerlink" title="返回数组的并集"></a>返回数组的并集</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> union = <span class="function">(<span class="params">a, b</span>) =&gt;</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>([...a, ...b]))</div></pre></td></tr></table></figure>
<h3 id="筛选数组剔除某些值的元素"><a href="#筛选数组剔除某些值的元素" class="headerlink" title="筛选数组剔除某些值的元素"></a>筛选数组剔除某些值的元素</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> without = <span class="function">(<span class="params">arr, ...args</span>) =&gt;</span> arr.filter(<span class="function"><span class="params">v</span> =&gt;</span> !args.includes(v))</div></pre></td></tr></table></figure>
<h3 id="zip函数"><a href="#zip函数" class="headerlink" title="zip函数"></a>zip函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> zip = <span class="function">(<span class="params">...arrays</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> maxLength = <span class="built_in">Math</span>.max(...arrays.map(<span class="function"><span class="params">x</span> =&gt;</span> x.length))</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(&#123;<span class="attr">length</span>: maxLength&#125;).map(<span class="function">(<span class="params">_, i</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(&#123;<span class="attr">length</span>: arrays.length&#125;, (_, k) =&gt; arrays[k][i])</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="判断元素是否在可视区内"><a href="#判断元素是否在可视区内" class="headerlink" title="判断元素是否在可视区内"></a>判断元素是否在可视区内</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> elementIsVisibleInViewport = <span class="function">(<span class="params">el, partiallyVisible = <span class="literal">false</span></span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> &#123; top, left, bottom, right &#125; = el.getBoundingClientRect()</div><div class="line">  <span class="keyword">return</span> partiallyVisible</div><div class="line">  ? ((top &gt; <span class="number">0</span> &amp;&amp; top &lt; innerHeight) || (bottom &gt; <span class="number">0</span> &amp;&amp; bottom &lt; innerHeight) || (left &gt; <span class="number">0</span> &amp;&amp; left &lt; innerWidth) || (right &gt; <span class="number">0</span> &amp;&amp; right &lt; innerWidth))</div><div class="line">  : top &gt;= <span class="number">0</span> &amp;&amp; left &gt;= <span class="number">0</span> &amp;&amp; bottom &lt;= innerHeight &amp;&amp; right &lt;= innerWidth</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="获取当前页的滚动位置"><a href="#获取当前页的滚动位置" class="headerlink" title="获取当前页的滚动位置"></a>获取当前页的滚动位置</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> getScrollPosition = <span class="function">(<span class="params">el = <span class="built_in">window</span></span>) =&gt;</span> (&#123;</div><div class="line">  x: el.pageXOffset ? el.pageXOffset : el.scrollLeft,</div><div class="line">  y: el.pageYOffset ? el.pageYOffset : el.scrollTop</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="获取url的查询字符串"><a href="#获取url的查询字符串" class="headerlink" title="获取url的查询字符串"></a>获取url的查询字符串</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> getURLParameters = <span class="function"><span class="params">url</span> =&gt;</span> url.match(<span class="regexp">/([^?=&amp;]+)(=[^&amp;]*)/g</span>).reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> (a[v.slice(<span class="number">0</span>, v.indexOf(<span class="string">'='</span>))] = v.slice(v.indexOf(<span class="string">'='</span>) + <span class="number">1</span>), a), &#123;&#125;)</div></pre></td></tr></table></figure>
<h3 id="页面重定向"><a href="#页面重定向" class="headerlink" title="页面重定向"></a>页面重定向</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> redirect = <span class="function">(<span class="params">url, asLink = <span class="literal">true</span></span>) =&gt;</span> asLink ? <span class="built_in">window</span>.location.href = url : <span class="built_in">window</span>.location.replace(url)</div></pre></td></tr></table></figure>
<h3 id="平滑的滚动到页面的顶部"><a href="#平滑的滚动到页面的顶部" class="headerlink" title="平滑的滚动到页面的顶部"></a>平滑的滚动到页面的顶部</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> scrollTop = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> c = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop</div><div class="line">  <span class="keyword">if</span>(c &gt; <span class="number">0</span>) &#123;</div><div class="line">    <span class="built_in">window</span>.requestAnimationFrame(scrollTop)</div><div class="line">    <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, c - c / <span class="number">8</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="返回两个日期之间的差异-天"><a href="#返回两个日期之间的差异-天" class="headerlink" title="返回两个日期之间的差异(天)"></a>返回两个日期之间的差异(天)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> getDaysDiffBetweenDates = <span class="function">(<span class="params">dateInitial, dateFinal</span>) =&gt;</span> (dateInitial - dateFinal) / (<span class="number">1000</span> * <span class="number">3600</span> * <span class="number">24</span>)</div></pre></td></tr></table></figure>
<h3 id="将JSON对象转换为日期"><a href="#将JSON对象转换为日期" class="headerlink" title="将JSON对象转换为日期"></a>将JSON对象转换为日期</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> JSONToDate = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> dt = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">parseInt</span>(arr.toString().substr(<span class="number">6</span>)))</div><div class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123; dt.getDate() &#125;</span>/<span class="subst">$&#123; dt.getMonth() + <span class="number">1</span> &#125;</span>/<span class="subst">$&#123; dt.getFullYear() &#125;</span>`</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="链式异步函数"><a href="#链式异步函数" class="headerlink" title="链式异步函数"></a>链式异步函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> chainAsync = <span class="function"><span class="params">fns</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">let</span> curr = <span class="number">0</span></div><div class="line">  <span class="keyword">let</span> next = <span class="function"><span class="params">()</span> =&gt;</span> fns[curr++](next)</div><div class="line">  next()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="compose函数-从右向左执行函数"><a href="#compose函数-从右向左执行函数" class="headerlink" title="compose函数(从右向左执行函数)"></a>compose函数(从右向左执行函数)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> compose = <span class="function">(<span class="params">...fns</span>) =&gt;</span> fns.reduce(<span class="function">(<span class="params">f, g</span>) =&gt;</span> (...args) =&gt; f(g(...args)))</div></pre></td></tr></table></figure>
<h3 id="pipe函数-从左向右执行函数"><a href="#pipe函数-从左向右执行函数" class="headerlink" title="pipe函数(从左向右执行函数)"></a>pipe函数(从左向右执行函数)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> pipe = <span class="function">(<span class="params">...fns</span>) =&gt;</span> fns.reduce(<span class="function">(<span class="params">f, g</span>) =&gt;</span> (...args) =&gt; g(f(...args)))</div></pre></td></tr></table></figure>
<h3 id="将异步函数转换为一个promise"><a href="#将异步函数转换为一个promise" class="headerlink" title="将异步函数转换为一个promise"></a>将异步函数转换为一个promise</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> promisify = <span class="function"><span class="params">func</span> =&gt;</span> (...args) =&gt; <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> func(...args, (err, result) =&gt; err ? reject(err) : resolve(result)))</div></pre></td></tr></table></figure>
<h3 id="顺序执行一系列的promise"><a href="#顺序执行一系列的promise" class="headerlink" title="顺序执行一系列的promise"></a>顺序执行一系列的promise</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> runPromiseSeries = <span class="function"><span class="params">ps</span> =&gt;</span> ps.reduce(<span class="function">(<span class="params">p, next</span>) =&gt;</span> p.then(next), <span class="built_in">Promise</span>.resolve())</div></pre></td></tr></table></figure>
<h3 id="延迟异步函数的执行"><a href="#延迟异步函数的执行" class="headerlink" title="延迟异步函数的执行"></a>延迟异步函数的执行</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> sleep = <span class="function"><span class="params">ms</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> setTimeout(resolve, ms))</div></pre></td></tr></table></figure>
<h3 id="返回一组数据的平均值"><a href="#返回一组数据的平均值" class="headerlink" title="返回一组数据的平均值"></a>返回一组数据的平均值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> arrayAverage = <span class="function"><span class="params">arr</span> =&gt;</span> arr.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>) / arr.length</div></pre></td></tr></table></figure>
<h3 id="返回一组数据的总和"><a href="#返回一组数据的总和" class="headerlink" title="返回一组数据的总和"></a>返回一组数据的总和</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> arraySum = <span class="function"><span class="params">arr</span> =&gt;</span> arr.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>)</div></pre></td></tr></table></figure>
<h3 id="Collatz算法-如果n是偶数-则返回n-2。否则返回3n-1"><a href="#Collatz算法-如果n是偶数-则返回n-2。否则返回3n-1" class="headerlink" title="Collatz算法(如果n是偶数, 则返回n/2。否则返回3n+1)"></a>Collatz算法(如果n是偶数, 则返回n/2。否则返回3n+1)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> collatz = <span class="function"><span class="params">n</span> =&gt;</span> n % <span class="number">2</span> === <span class="number">0</span> ? n / <span class="number">2</span> : <span class="number">3</span> * n + <span class="number">1</span></div></pre></td></tr></table></figure>
<h3 id="将数字转换为数组"><a href="#将数字转换为数组" class="headerlink" title="将数字转换为数组"></a>将数字转换为数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> digitize = <span class="function"><span class="params">n</span> =&gt;</span> [...String(n)].map(<span class="function"><span class="params">i</span> =&gt;</span> <span class="built_in">parseInt</span>(i))</div></pre></td></tr></table></figure>
<h3 id="计算两点之间的距离"><a href="#计算两点之间的距离" class="headerlink" title="计算两点之间的距离"></a>计算两点之间的距离</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> distance = <span class="function">(<span class="params">x0, y0, x1, y1</span>) =&gt;</span> <span class="built_in">Math</span>.hypot(x1 - x0, y1 - y0)</div></pre></td></tr></table></figure>
<h3 id="计算一个数字的阶乘"><a href="#计算一个数字的阶乘" class="headerlink" title="计算一个数字的阶乘"></a>计算一个数字的阶乘</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> factorial = <span class="function"><span class="params">n</span> =&gt;</span> n &lt; <span class="number">0</span> ? <span class="function">(<span class="params">(</span>) =&gt;</span> &#123;<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Negative numbers are not allowed!'</span>)&#125;)() : n &lt;= <span class="number">1</span> ? n : n * factorial(n - <span class="number">1</span>)</div></pre></td></tr></table></figure>
<h3 id="包含斐波那契值的数组"><a href="#包含斐波那契值的数组" class="headerlink" title="包含斐波那契值的数组"></a>包含斐波那契值的数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> fibonacci = <span class="function"><span class="params">n</span> =&gt;</span> <span class="built_in">Array</span>(n).fill(<span class="number">0</span>).reduce(<span class="function">(<span class="params">acc, val, i</span>) =&gt;</span> acc.concat(i &gt; <span class="number">1</span> ? acc[i - <span class="number">1</span>] + acc[i - <span class="number">2</span>] : i), [])</div></pre></td></tr></table></figure>
<h3 id="计算两个数字的最大公约数-important"><a href="#计算两个数字的最大公约数-important" class="headerlink" title="计算两个数字的最大公约数(important)"></a>计算两个数字的最大公约数(important)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> gcd = <span class="function">(<span class="params">x, y</span>) =&gt;</span> !y ? x : gcd(y, x % y)</div></pre></td></tr></table></figure>
<h3 id="计算两个数字的最小公倍数-important"><a href="#计算两个数字的最小公倍数-important" class="headerlink" title="计算两个数字的最小公倍数(important)"></a>计算两个数字的最小公倍数(important)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> lcm = <span class="function">(<span class="params">x,y</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> gcd = <span class="function">(<span class="params">x, y</span>) =&gt;</span> !y ? x : gcd(y, x % y);</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.abs(x*y)/(gcd(x,y));</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="返回数字数组的中间值"><a href="#返回数字数组的中间值" class="headerlink" title="返回数字数组的中间值"></a>返回数字数组的中间值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> median = <span class="function"><span class="params">arr</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> mid = <span class="built_in">Math</span>.floor(arr.length / <span class="number">2</span>)</div><div class="line">  <span class="keyword">const</span> nums = arr.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b)</div><div class="line"></div><div class="line">  <span class="keyword">return</span> arr.length % <span class="number">2</span> !== <span class="number">0</span> ? nums[mid] ? (nums[mid - <span class="number">1</span>] + nums[mid]) / <span class="number">2</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="返回指定范围内的随机整数"><a href="#返回指定范围内的随机整数" class="headerlink" title="返回指定范围内的随机整数"></a>返回指定范围内的随机整数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> randomIntegerInRange = <span class="function">(<span class="params">min, max</span>) =&gt;</span> <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>)) + min</div></pre></td></tr></table></figure>
<h3 id="返回指定范围内的随机数"><a href="#返回指定范围内的随机数" class="headerlink" title="返回指定范围内的随机数"></a>返回指定范围内的随机数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> randomNumberInRange = <span class="function">(<span class="params">min, max</span>) =&gt;</span> <span class="built_in">Math</span>.random() * (max - min) + min</div></pre></td></tr></table></figure>
<h3 id="将数字保留指定的位数"><a href="#将数字保留指定的位数" class="headerlink" title="将数字保留指定的位数"></a>将数字保留指定的位数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> round = <span class="function">(<span class="params">n, decimals = <span class="number">0</span></span>) =&gt;</span> <span class="built_in">Number</span>(<span class="string">`<span class="subst">$&#123;<span class="built_in">Math</span>.round(<span class="string">`<span class="subst">$&#123;n&#125;</span>e<span class="subst">$&#123;decimals&#125;</span>`</span>)&#125;</span>e-<span class="subst">$&#123;decimals&#125;</span>`</span>)</div></pre></td></tr></table></figure>
<h3 id="返回数字数组的标准差"><a href="#返回数字数组的标准差" class="headerlink" title="返回数字数组的标准差"></a>返回数字数组的标准差</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> standardDeviation = <span class="function">(<span class="params">arr, usePopulation = <span class="literal">false</span></span>) =&gt;</span> &#123;</div><div class="line">  onst mean = arr.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>) / arr.length;</div><div class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.sqrt(</div><div class="line">    arr.reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc.concat(<span class="built_in">Math</span>.pow(val - mean, <span class="number">2</span>)), [])</div><div class="line">    .reduce(<span class="function">(<span class="params">acc, val</span>) =&gt;</span> acc + val, <span class="number">0</span>) / (arr.length - (usePopulation ? <span class="number">0</span> : <span class="number">1</span>))</div><div class="line">  )</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="从json对象中移除指定属性之外的任何特性"><a href="#从json对象中移除指定属性之外的任何特性" class="headerlink" title="从json对象中移除指定属性之外的任何特性"></a>从json对象中移除指定属性之外的任何特性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> cleanObj = <span class="function">(<span class="params">obj, keysToKeep = [], childIndicator</span>) =&gt;</span> &#123;</div><div class="line">  <span class="built_in">Object</span>.keys(obj).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span>(key === childIndicator) &#123;</div><div class="line">      cleanObj(obj[key], keysToKeep, childIndicator)</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(!keysToKeep.includes(key)) &#123;</div><div class="line">      <span class="keyword">delete</span> obj[key]</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="从给定的键值对创建对象"><a href="#从给定的键值对创建对象" class="headerlink" title="从给定的键值对创建对象"></a>从给定的键值对创建对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> objectFromPairs = <span class="function"><span class="params">arr</span> =&gt;</span> arr.reduce(<span class="function">(<span class="params">a, v</span>) =&gt;</span> (a[v[<span class="number">0</span>]] = v[<span class="number">1</span>], a), &#123;&#125;)</div></pre></td></tr></table></figure>
<h3 id="将json对象转化为键值对数组"><a href="#将json对象转化为键值对数组" class="headerlink" title="将json对象转化为键值对数组"></a>将json对象转化为键值对数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> objectToPairs = <span class="function"><span class="params">obj</span> =&gt;</span> <span class="built_in">Object</span>.keys(obj).map(<span class="function"><span class="params">k</span> =&gt;</span> [k, obj[k]])</div></pre></td></tr></table></figure>
<h3 id="浅复制"><a href="#浅复制" class="headerlink" title="浅复制"></a>浅复制</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> shallowClone = <span class="function"><span class="params">obj</span> =&gt;</span> <span class="built_in">Object</span>.assign(&#123;&#125;, obj)</div></pre></td></tr></table></figure>
<h3 id="将字符串中每个单词的首字母大写"><a href="#将字符串中每个单词的首字母大写" class="headerlink" title="将字符串中每个单词的首字母大写"></a>将字符串中每个单词的首字母大写</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> capitalizeEveryWord = <span class="function"><span class="params">str</span> =&gt;</span> str.replace(<span class="regexp">/\b[a-z]/g</span>, char =&gt; char.toUpperCase())</div></pre></td></tr></table></figure>
<h3 id="转义正则表达式中用到的字符"><a href="#转义正则表达式中用到的字符" class="headerlink" title="转义正则表达式中用到的字符"></a>转义正则表达式中用到的字符</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> escapeRegExp = <span class="function"><span class="params">str</span> =&gt;</span> str.replace(<span class="regexp">/[.*+?^$&#123;&#125;()|[\]\\]/g</span>, <span class="string">'\\$&amp;'</span>)</div></pre></td></tr></table></figure>
<h3 id="将驼峰法字符串转换为指定形式"><a href="#将驼峰法字符串转换为指定形式" class="headerlink" title="将驼峰法字符串转换为指定形式"></a>将驼峰法字符串转换为指定形式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> fromCamelCase = <span class="function">(<span class="params">str, separator = <span class="string">'_'</span></span>) =&gt;</span> str.replace(<span class="regexp">/([a-z\d])([A-Z])/g</span>, <span class="string">'$1'</span> + separator + <span class="string">'$2'</span>)</div><div class="line">.replace(<span class="regexp">/([A-Z]+)([A-Z][a-z\d]+)/g</span>, <span class="string">'$1'</span> + separator + <span class="string">'$2'</span>).toLowerCase();</div></pre></td></tr></table></figure>
<h3 id="为字符串加…"><a href="#为字符串加…" class="headerlink" title="为字符串加…"></a>为字符串加…</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> truncateString = <span class="function">(<span class="params">str, num</span>) =&gt;</span></div><div class="line">str.length &gt; num ? str.slice(<span class="number">0</span>, num &gt; <span class="number">3</span> ? num - <span class="number">3</span> : num) + <span class="string">'...'</span> : str;</div></pre></td></tr></table></figure>
<h3 id="hexToRgb"><a href="#hexToRgb" class="headerlink" title="hexToRgb"></a>hexToRgb</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> hexToRgb = <span class="function"><span class="params">hex</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">const</span> extendHex = <span class="function"><span class="params">shortHex</span> =&gt;</span> <span class="string">'#'</span> + shortHex.slice(shortHex.startWith(<span class="string">'#'</span>) ? <span class="number">1</span> : <span class="number">0</span>).split(<span class="string">''</span>).map(<span class="function"><span class="params">x</span> =&gt;</span> x + x).join(<span class="string">''</span>)</div><div class="line">  <span class="keyword">const</span> extendedHex = hex.slice(hex.startsWith(<span class="string">'#'</span>) ? <span class="number">1</span> : <span class="number">0</span>).length === <span class="number">3</span> ? extendHex(hex) : hex</div><div class="line">  <span class="keyword">return</span> <span class="string">`rgb(<span class="subst">$&#123;<span class="built_in">parseInt</span>(extendedHex.slice(<span class="number">1</span>), <span class="number">16</span>) &gt;&gt; <span class="number">16</span>&#125;</span>, <span class="subst">$&#123;(<span class="built_in">parseInt</span>(extendedHex.slice(<span class="number">1</span>), <span class="number">16</span>) &amp; <span class="number">0x00ff00</span>) &gt;&gt; <span class="number">8</span>&#125;</span>, <span class="subst">$&#123;<span class="built_in">parseInt</span>(extendedHex.slice(<span class="number">1</span>), <span class="number">16</span>) &amp; <span class="number">0x0000ff</span>&#125;</span>)`</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="RGBToHex"><a href="#RGBToHex" class="headerlink" title="RGBToHex"></a>RGBToHex</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> RGBToHex = <span class="function">(<span class="params">r, g, b</span>) =&gt;</span> ((r &lt;&lt; <span class="number">16</span>) + (g &lt;&lt; <span class="number">8</span>) + b).toString(<span class="number">16</span>).padStart(<span class="number">6</span>, <span class="string">'0'</span>)</div></pre></td></tr></table></figure>
<h3 id="生成UUID"><a href="#生成UUID" class="headerlink" title="生成UUID"></a>生成UUID</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> UUIDGenerator = <span class="function"><span class="params">()</span> =&gt;</span></div><div class="line">  ([<span class="number">1e7</span>] + <span class="number">-1e3</span> + <span class="number">-4e3</span> + <span class="number">-8e3</span> + <span class="number">-1e11</span>).replace(<span class="regexp">/[018]/g</span>, c =&gt;</div><div class="line">  (c ^ crypto.getRandomValues(<span class="keyword">new</span> <span class="built_in">Uint8Array</span>(<span class="number">1</span>))[<span class="number">0</span>] &amp; <span class="number">15</span> &gt;&gt; c / <span class="number">4</span>).toString(<span class="number">16</span>)</div><div class="line">);</div></pre></td></tr></table></figure>
<h3 id="验证邮箱"><a href="#验证邮箱" class="headerlink" title="验证邮箱"></a>验证邮箱</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> validateEmail = <span class="function"><span class="params">str</span> =&gt;</span></div><div class="line">  /^(([^<span class="xml"><span class="tag">&lt;&gt;</span>()\[\]\\.,;:\s@"]+(\.[^<span class="tag">&lt;&gt;</span>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\.[0-9]&#123;1,3&#125;\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]&#123;2,&#125;))$/.test(str)</span></div></pre></td></tr></table></figure>
            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>


    
<nav id="article-nav">
    
        <a href="/2017/12/31/代码库/CSS-RESET/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    CSS
                
            </div>
        </a>
    
    
        <a href="/2017/12/31/代码库/gulp/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">gulp</div>
        </a>
    
</nav>





    
    




<!-- baidu url auto push script -->
<script type="text/javascript">
    !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,o=document.referrer;if(!e.test(r)){var n="//api.share.baidu.com/s.gif";o?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var t=new Image;t.src=n}}(window);
</script>     
</section>
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            John Doe &copy; 2018 
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/4.0/80x15.png" /></a>
            <br> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme - <a href="https://github.com/zthxxx/hexo-theme-Wikitten">wikitten</a>
        </div>
    </div>
</footer>
        

    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    
        <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true,
            TeX: {
                equationNumbers: {
                  autoNumber: 'AMS'
                }
            }
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>